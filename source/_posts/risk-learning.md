---
title: 风控学习笔记
date: 2021-11-18 19:42:44
tags:
- 工作
- 技术
- 风控
- 建模
categories: 机器学习
description: 风控学习
photos:
---
# 评价指标

## KS指标/PSI指标
KS评价变量对结果的区分度 
PSI评价变量对与结果影响是否稳定（相对时间）

# 基本术语

## A/B/C卡
A ：application
B : Beahavior
C : cuishou

# 树模型与规则挖掘（第二课时）

## 单变量分析
link: https://www.jianshu.com/p/13c19bbd550d
* zip 函数 dataframe 根据列表初始化
* sorted(ite_obj, key= ，reverse=) 自定义排序
* line 画单变量图形

## 树模型的一些疑惑
* 为什么ID3树 特征取值较多的值 信息熵比较小 如何克服？
* CART树的回归是怎么划分出R个集合的呢？
 
## 基于决策树规则挖掘油品贷案例
link: https://www.jianshu.com/p/13c19bbd550d 

* 做了什么数据清洗呢？ id去重、缺失值填充 dp.drop_duplicates() dp.fillna()
* 做了哪些数据衍生？ 一些时间跨度统计、常规统计 groupby().apply().reset_index() dp.sort_values() dp.merge()
* 训练的目标是什么？为什么使用回归决策树进行训练呢？

# （第三课时）特征工程

基于时间序列进行特征衍生: [学习pandas和numpy 的加工语句](https://www.pypandas.cn/docs/getting_started/10min.html)

* 基础特征构造
* 数据预处理：删、填
* 特征衍生：DFS/CNN
* 特征变换
* 特征筛选
  * skl pkgs提供的工具
    * filter 根据计算指标筛选
      * 移除低方差：筛选方差为0
      * 单变量特征选择：相关性分析
        * 卡方检验 **x,y**之间比较
        * 皮尔逊相关系数 **x1,x2**之间的比较 用于去重
        * 方差膨胀系数 VIF
    * wrapper
      * 递归特征消除
    * embedded
      * 利用模型来筛选（主流方法，机器学习方法）
  * 实操
    * 会遇到的问题
      * 模型效果不好（大概率 数据集本身就有问题）
      * 训练集效果好，跨时间测试效果不好（样本分布不一致导致 入模变量不对 需要根据跨时间样本调整入模变量 查看PSI值）
      * 跨时间测试效果好，上线之后效果不好（线上线下模型变量逻辑有问题）
      * 上线之后效果好，几周之后分数分布开始下滑
      * 上线后一到两个月比较稳定，突然分数骤降（一般是外部环境、业务运营）
      * 没有明显问题，但是模型每个月逐步失效（普遍行为）
    * 怎么解决这些问题（在建模过程）
      * 变量有贡献
      * 变量线性无关
      * 逻辑回归评分卡希望变量呈现单调趋势（业务角度也希望）
      * 样本分布稳定性评估PSI 模型的PSI、变量的PSI
      * 操作步骤：
        * 变量重要性
          * IV值（woe值）
          * 卡方检验
          * 模型筛选（L1正则、树模型）**目前都用XGboost来做了**
        * 变量相关性评估
          * 皮尔逊相关系数 R
          * 方差膨胀系数 VIF
        * 变量稳定性评估 
          * PSI
          * 跨时间交叉检验（取多个模型变量的交集，但是要小心共性特征，不一定每次都要在模型中，因为可能是两个共性特征的任一个进入模型，严格取交集会导致共性特征都取不到）
        * 作业：
          * 上诉用到的指标在代码中的写法都熟悉下

> 特征衍生前进行特征变量筛选? 一般不会

# （第四课时）逻辑回归与评分卡
## 训练逻辑回归
课程上讲的太乱太快、不细致  
找到一个实战 [例子](https://zhuanlan.zhihu.com/p/148102950)


* 需要后续深入研究的知识点
  * 如何做分箱操作
    * 什么变量需要做分箱 binning
    * 如何分箱
    * 如何判断分箱的好坏


## 建立评分模型

## 分数划分和贷后监控
